{% if is_paginated %}
<div class="flex justify-center items-center space-x-2 mt-12">

    <!-- Previous Button -->
    {% if page_obj.has_previous %}
        <a href="?page=1{% if search_query %}&q={{ search_query }}{% endif %}{% if selected_category %}&category={{ selected_category }}{% endif %}"
           class="px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
            First
        </a>
        <a href="?page={{ page_obj.previous_page_number }}{% if search_query %}&q={{ search_query }}{% endif %}{% if selected_category %}&category={{ selected_category }}{% endif %}"
           class="px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
            Previous
        </a>
    {% else %}
        <span class="px-4 py-2 bg-gray-100 border border-gray-200 text-gray-400 rounded-lg cursor-not-allowed">
            First
        </span>
        <span class="px-4 py-2 bg-gray-100 border border-gray-200 text-gray-400 rounded-lg cursor-not-allowed">
            Previous
        </span>
    {% endif %}

    <!-- Page Numbers -->
    <div class="flex items-center space-x-2">
        {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
                <span class="px-4 py-2 bg-indigo-600 text-white font-semibold rounded-lg">
                    {{ num }}
                </span>
            {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                <a href="?page={{ num }}{% if search_query %}&q={{ search_query }}{% endif %}{% if selected_category %}&category={{ selected_category }}{% endif %}"
                   class="px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                    {{ num }}
                </a>
            {% endif %}
        {% endfor %}
    </div>

    <!-- Next Button -->
    {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}{% if search_query %}&q={{ search_query }}{% endif %}{% if selected_category %}&category={{ selected_category }}{% endif %}"
           class="px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
            Next
        </a>
        <a href="?page={{ page_obj.paginator.num_pages }}{% if search_query %}&q={{ search_query }}{% endif %}{% if selected_category %}&category={{ selected_category }}{% endif %}"
           class="px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
            Last
        </a>
    {% else %}
        <span class="px-4 py-2 bg-gray-100 border border-gray-200 text-gray-400 rounded-lg cursor-not-allowed">
            Next
        </span>
        <span class="px-4 py-2 bg-gray-100 border border-gray-200 text-gray-400 rounded-lg cursor-not-allowed">
            Last
        </span>
    {% endif %}

</div>

<!-- Page Info -->
<div class="text-center mt-4 text-gray-600">
    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
</div>
{% endif %}
